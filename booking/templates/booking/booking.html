{% extends 'base.html' %}
{% load static %}

{% block extra_title %} Book An Appointment Today{% endblock %}


{% block page_header %}
<div class="container header-container">
    <div class="row">
        <div class="col"></div>
    </div>
</div>
{% endblock %}

{% block content %}
<!--Booking Widget-->
<div class="container mt-4">
    <div class="row">
        <div class="col-12">
            <h3>Make A Booking</h3>
            <hr />
        </div>
    </div>
    <div class="row">
        <div class="col-12 col-md-9">
            {% for category in categories %}
            <h4 class="mt-5 mb-3">{{ category }}</h4>
            <div class="contain-services shadow">
                           {% for service in services %}
                            {% ifequal service.serviceCategory|stringformat:"s" category.name|stringformat:"s" %} 
                            <!-- Output Service -->
                            <div class="col-12 pt-3 pb-3 select-service"><div class="circle-select-service d-inline-block"></div><span class="service-name ml-3">{{ service.name }}</span>
                            <span class="d-inline-block service-price">€<span class="raw-cost">{{ service.price }}</span></span>
                            </div>
                            <hr class="p-0 m-0"/>
                            {% endifequal %}
                           
                            {% endfor %}    

                </div>
              {% endfor %}
          
        </div>



        <div class="col-3 d-none d-lg-block"> 
            <div class="card" style="width: 18rem;">
                <div class="card-body heading-card pb-0">
                  <h5 class="card-title text-center">Upcoming Bookings ({{ bookings|length}})</h5>
                 
                </div>
                <div class="card-body pt-0 pb-0">
                    <ul class="list-group list-group-flush ">
                        {% if bookings %}
                        {% for booking in bookings %}
                        <li class="list-group-item"> {{ booking.service }}
                            - {{ booking.time }}</li>
                        {% endfor %}
                        {% else %}
                        <li class="list-group-item">You have no upcoming bookings</li>
                        {% endif %}                       
                      </ul>
                </div>
              </div> 
        </div>

    </div>


    <!--Request Booking Fixed PopUp for Desktop-->
    <div class="fixed-popup-desktop d-sm-none d-md-none d-lg-none shadow">
    <div class="col-12 text-center pt-3">
    <strong>BOOK</strong>
    <hr />
    </div>
    <div id="contain-selected-services"></div>
    <div class="col-12 text-right">
    <h6>Total: €<span class="total-cost">0</span></h6>
    <div class="continue-cooking-btn">CONTINUE</div>
    </div>
    </div>

    <!--Request Booking Fixed Bottom Bar For Mobile-->
    <div class="row request-fixed-bar d-none d-lg-none ">
        <div class="col-12 text-center">
            <!--Insert selected services-->
            <div class="mr-auto display-selected-services"></div>
            <div class="ml-auto request-a-booking-btn">Request Booking</div>
        </div>
    </div>



</div>
{% endblock %}


<!--Load JQuery for booking widget-->
{% block postloadjs %}
<script src="{% static 'js/booking.js' %}"></script>
{% endblock %}